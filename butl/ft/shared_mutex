// file      : butl/ft/shared_mutex -*- C++ -*-
// copyright : Copyright (c) 2014-2017 Code Synthesis Ltd
// license   : MIT; see accompanying LICENSE file

#ifndef BUTL_FT_SHARED_MUTEX
#define BUTL_FT_SHARED_MUTEX

#include <cstddef>      // _LIBCPP_VERSION
#include <shared_mutex>

// __cpp_lib_shared_mutex
//
#ifndef __cpp_lib_shared_mutex
   //
   // VC has it since 1900.
   //
#  if defined(_MSC_VER)
#    if _MSC_VER >= 1900
#      define __cpp_lib_shared_mutex 201505
#    endif
   //
   // Clang's libc++ seems to have it for a while (but not before 1200) so we
   // assume it's there from 1200.
   //
#  elif defined(_LIBCPP_VERSION)
#    if _LIBCPP_VERSION >= 1200
#      define __cpp_lib_shared_mutex 201505
#    endif
   //
   // GCC libstdc++ has it since GCC 6 and it defines the feature test macro.
   // We will also use this for any other runtime.
   //
#  endif
#endif

// __cpp_lib_shared_mutex
//
#ifndef __cpp_lib_shared_timed_mutex
#  define __cpp_lib_shared_timed_mutex 201402
#endif

#endif // BUTL_FT_SHARED_MUTEX
